<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Medication Follow-up Form</title>
    <style>
        * {
            box-sizing: border-box;
            margin: 0;
            padding: 0;
        }

        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            min-height: 100vh;
            padding: 20px;
        }

        .container {
            max-width: 600px;
            margin: 0 auto;
            background: white;
            border-radius: 20px;
            box-shadow: 0 20px 60px rgba(0,0,0,0.3);
            overflow: hidden;
        }

        .header {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
            padding: 30px;
            text-align: center;
        }

        .header h1 {
            font-size: 24px;
            margin-bottom: 10px;
        }

        .header p {
            opacity: 0.9;
            font-size: 14px;
        }

        .language-selector {
            background: #f8f9fa;
            padding: 20px;
            border-bottom: 1px solid #eee;
        }

        .language-selector h3 {
            margin-bottom: 15px;
            color: #333;
            font-size: 16px;
        }

        .language-options {
            display: flex;
            flex-wrap: wrap;
            gap: 10px;
        }

        .language-option {
            flex: 1;
            min-width: 100px;
        }

        .language-option input {
            display: none;
        }

        .language-option label {
            display: block;
            padding: 10px 15px;
            background: white;
            border: 2px solid #ddd;
            border-radius: 8px;
            cursor: pointer;
            text-align: center;
            transition: all 0.3s ease;
            font-size: 14px;
        }

        .language-option input:checked + label {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
            border-color: transparent;
        }

        .language-option label:hover {
            border-color: #667eea;
        }

        .form-content {
            padding: 30px;
        }

        .question {
            margin-bottom: 30px;
            animation: fadeIn 0.5s ease;
        }

        @keyframes fadeIn {
            from { opacity: 0; transform: translateY(10px); }
            to { opacity: 1; transform: translateY(0); }
        }

        .question-label {
            font-weight: 600;
            color: #333;
            margin-bottom: 15px;
            font-size: 16px;
            line-height: 1.5;
        }

        .question-number {
            display: inline-block;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
            width: 28px;
            height: 28px;
            border-radius: 50%;
            text-align: center;
            line-height: 28px;
            font-size: 14px;
            margin-right: 10px;
        }

        .options {
            display: flex;
            flex-direction: column;
            gap: 10px;
        }

        .option {
            position: relative;
        }

        .option input {
            display: none;
        }

        .option label {
            display: block;
            padding: 15px 20px;
            background: #f8f9fa;
            border: 2px solid #e9ecef;
            border-radius: 10px;
            cursor: pointer;
            transition: all 0.3s ease;
            padding-left: 50px;
        }

        .option label::before {
            content: '';
            position: absolute;
            left: 15px;
            top: 50%;
            transform: translateY(-50%);
            width: 22px;
            height: 22px;
            border: 2px solid #ccc;
            border-radius: 50%;
            transition: all 0.3s ease;
        }

        .option input:checked + label {
            background: #e8f4ff;
            border-color: #667eea;
        }

        .option input:checked + label::before {
            border-color: #667eea;
            background: #667eea;
        }

        .option input:checked + label::after {
            content: '';
            position: absolute;
            left: 21px;
            top: 50%;
            transform: translateY(-50%);
            width: 10px;
            height: 10px;
            background: white;
            border-radius: 50%;
        }

        .option label:hover {
            background: #e9ecef;
        }

        /* Checkbox style */
        .checkbox-option label::before {
            border-radius: 4px;
        }

        .checkbox-option input:checked + label::after {
            content: '‚úì';
            position: absolute;
            left: 19px;
            top: 50%;
            transform: translateY(-50%);
            color: white;
            font-size: 14px;
            font-weight: bold;
            background: none;
        }

        .textarea-wrapper {
            margin-top: 10px;
        }

        .textarea-wrapper textarea {
            width: 100%;
            min-height: 120px;
            padding: 15px;
            border: 2px solid #e9ecef;
            border-radius: 10px;
            font-family: inherit;
            font-size: 16px;
            resize: vertical;
            transition: border-color 0.3s ease;
        }

        .textarea-wrapper textarea:focus {
            outline: none;
            border-color: #667eea;
        }

        .conditional {
            display: none;
            margin-top: 20px;
            padding: 20px;
            background: #fff9e6;
            border-radius: 10px;
            border-left: 4px solid #ffc107;
        }

        .conditional.show {
            display: block;
        }

        .submit-section {
            padding: 30px;
            background: #f8f9fa;
            border-top: 1px solid #eee;
        }

        .submit-btn {
            width: 100%;
            padding: 18px;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
            border: none;
            border-radius: 12px;
            font-size: 18px;
            font-weight: 600;
            cursor: pointer;
            transition: transform 0.3s ease, box-shadow 0.3s ease;
        }

        .submit-btn:hover {
            transform: translateY(-2px);
            box-shadow: 0 10px 30px rgba(102, 126, 234, 0.4);
        }

        .submit-btn:active {
            transform: translateY(0);
        }

        .submit-btn:disabled {
            opacity: 0.7;
            cursor: not-allowed;
        }

        .success-message {
            display: none;
            text-align: center;
            padding: 50px 30px;
        }

        .success-message.show {
            display: block;
        }

        .success-icon {
            font-size: 80px;
            margin-bottom: 20px;
        }

        .success-message h2 {
            color: #28a745;
            margin-bottom: 15px;
        }

        .success-message p {
            color: #666;
            line-height: 1.6;
        }

        .required-indicator {
            color: #dc3545;
            margin-left: 5px;
        }

        .progress-bar {
            height: 4px;
            background: #e9ecef;
            position: relative;
            overflow: hidden;
        }

        .progress-bar-fill {
            height: 100%;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            transition: width 0.3s ease;
        }

        @media (max-width: 480px) {
            body {
                padding: 10px;
            }

            .header {
                padding: 20px;
            }

            .form-content {
                padding: 20px;
            }

            .language-options {
                flex-direction: column;
            }

            .language-option {
                min-width: auto;
            }
        }
    </style>
</head>
<body>
    <div class="container">
        <div class="header">
            <h1 data-i18n="title">üíä Medication Follow-up Form</h1>
            <p data-i18n="subtitle">Please complete this form to help us monitor your health</p>
        </div>

        <div class="progress-bar">
            <div class="progress-bar-fill" id="progressBar" style="width: 0%"></div>
        </div>

        <div class="language-selector">
            <h3 data-i18n="selectLanguage">üåê Select your preferred language:</h3>
            <div class="language-options">
                <div class="language-option">
                    <input type="radio" name="language" id="lang-en" value="en" checked>
                    <label for="lang-en">English</label>
                </div>
                <div class="language-option">
                    <input type="radio" name="language" id="lang-hi" value="hi">
                    <label for="lang-hi">‡§π‡§ø‡§Ç‡§¶‡•Ä</label>
                </div>
                <div class="language-option">
                    <input type="radio" name="language" id="lang-ta" value="ta">
                    <label for="lang-ta">‡Æ§‡ÆÆ‡Æø‡Æ¥‡Øç</label>
                </div>
                <div class="language-option">
                    <input type="radio" name="language" id="lang-te" value="te">
                    <label for="lang-te">‡∞§‡±Ü‡∞≤‡±Å‡∞ó‡±Å</label>
                </div>
                <div class="language-option">
                    <input type="radio" name="language" id="lang-ml" value="ml">
                    <label for="lang-ml">‡¥Æ‡¥≤‡¥Ø‡¥æ‡¥≥‡¥Ç</label>
                </div>
            </div>
        </div>

        <form id="followupForm">
            <div class="form-content" id="formContent">
                <!-- Questions will be dynamically inserted here -->
            </div>

            <div class="submit-section" id="submitSection">
                <button type="submit" class="submit-btn" data-i18n="submit">Submit Form</button>
            </div>
        </form>

        <div class="success-message" id="successMessage">
            <div class="success-icon">‚úÖ</div>
            <h2 data-i18n="thankYou">Thank You!</h2>
            <p data-i18n="successText">Your responses have been submitted successfully. You can now close this page.</p>
        </div>
    </div>

    <script>
        // Multi-language translations
        const translations = {
            en: {
                title: 'üíä Medication Follow-up Form',
                subtitle: 'Please complete this form to help us monitor your health',
                selectLanguage: 'üåê Select your preferred language:',
                submit: 'Submit Form',
                thankYou: 'Thank You!',
                successText: 'Your responses have been submitted successfully. You can now close this page.',
                required: '(Required)',
                questions: {
                    medicine_started: {
                        label: 'Have you started taking the prescribed medicine?',
                        options: ['Yes, I have started', 'No, not yet', 'I will start tomorrow']
                    },
                    adherence: {
                        label: 'How often are you taking the medicine daily?',
                        options: ['Once a day', 'Twice a day', 'Three times a day', 'As needed']
                    },
                    food_relation: {
                        label: 'When do you take the medicine in relation to food?',
                        options: ['Before food', 'After food', 'With food', 'Empty stomach']
                    },
                    overall_feeling: {
                        label: 'Since starting the medicine, how are you feeling overall?',
                        options: ['Better üòä', 'Same üòê', 'Worse üòî', 'Much worse üò∞']
                    },
                    new_symptoms: {
                        label: 'Have you noticed any new symptoms or discomfort?',
                        options: ['Yes, I have new symptoms', 'No new symptoms']
                    },
                    symptom_description: {
                        label: 'Please describe the symptoms you are experiencing:'
                    },
                    onset: {
                        label: 'When did these symptoms start?',
                        options: ['After first dose', 'Within 1 day', 'After 2-3 days', 'After more than 3 days']
                    },
                    severity: {
                        label: 'How severe are the symptoms?',
                        options: ['Mild (noticeable but manageable)', 'Moderate (uncomfortable, affecting daily life)', 'Severe (needs medical attention) ‚ö†Ô∏è']
                    },
                    body_parts: {
                        label: 'Which part of your body is affected? (Select all that apply)',
                        options: ['Skin', 'Stomach/Digestive', 'Head', 'Chest', 'Breathing', 'Other']
                    },
                    safety_confirm: {
                        label: 'Please confirm:',
                        options: ['I understand I should contact my doctor if symptoms worsen', 'I have questions for a healthcare professional']
                    }
                }
            },
            hi: {
                title: 'üíä ‡§¶‡§µ‡§æ ‡§´‡•â‡§≤‡•ã-‡§Ö‡§™ ‡§´‡•â‡§∞‡•ç‡§Æ',
                subtitle: '‡§ï‡•É‡§™‡§Ø‡§æ ‡§Ö‡§™‡§®‡•á ‡§∏‡•ç‡§µ‡§æ‡§∏‡•ç‡§•‡•ç‡§Ø ‡§ï‡•Ä ‡§®‡§ø‡§ó‡§∞‡§æ‡§®‡•Ä ‡§Æ‡•á‡§Ç ‡§Æ‡§¶‡§¶ ‡§ï‡•á ‡§≤‡§ø‡§è ‡§Ø‡§π ‡§´‡•â‡§∞‡•ç‡§Æ ‡§™‡•Ç‡§∞‡§æ ‡§ï‡§∞‡•á‡§Ç',
                selectLanguage: 'üåê ‡§Ö‡§™‡§®‡•Ä ‡§™‡§∏‡§Ç‡§¶‡•Ä‡§¶‡§æ ‡§≠‡§æ‡§∑‡§æ ‡§ö‡•Å‡§®‡•á‡§Ç:',
                submit: '‡§´‡•â‡§∞‡•ç‡§Æ ‡§ú‡§Æ‡§æ ‡§ï‡§∞‡•á‡§Ç',
                thankYou: '‡§ß‡§®‡•ç‡§Ø‡§µ‡§æ‡§¶!',
                successText: '‡§Ü‡§™‡§ï‡•Ä ‡§™‡•ç‡§∞‡§§‡§ø‡§ï‡•ç‡§∞‡§ø‡§Ø‡§æ‡§è‡§Ç ‡§∏‡§´‡§≤‡§§‡§æ‡§™‡•Ç‡§∞‡•ç‡§µ‡§ï ‡§ú‡§Æ‡§æ ‡§ï‡§∞ ‡§¶‡•Ä ‡§ó‡§à ‡§π‡•à‡§Ç‡•§ ‡§Ö‡§¨ ‡§Ü‡§™ ‡§á‡§∏ ‡§™‡•á‡§ú ‡§ï‡•ã ‡§¨‡§Ç‡§¶ ‡§ï‡§∞ ‡§∏‡§ï‡§§‡•á ‡§π‡•à‡§Ç‡•§',
                required: '(‡§Ü‡§µ‡§∂‡•ç‡§Ø‡§ï)',
                questions: {
                    medicine_started: {
                        label: '‡§ï‡•ç‡§Ø‡§æ ‡§Ü‡§™‡§®‡•á ‡§®‡§ø‡§∞‡•ç‡§ß‡§æ‡§∞‡§ø‡§§ ‡§¶‡§µ‡§æ ‡§≤‡•á‡§®‡§æ ‡§∂‡•Å‡§∞‡•Ç ‡§ï‡§∞ ‡§¶‡§ø‡§Ø‡§æ ‡§π‡•à?',
                        options: ['‡§π‡§æ‡§Ç, ‡§Æ‡•à‡§Ç‡§®‡•á ‡§∂‡•Å‡§∞‡•Ç ‡§ï‡§∞ ‡§¶‡§ø‡§Ø‡§æ ‡§π‡•à', '‡§®‡§π‡•Ä‡§Ç, ‡§Ö‡§≠‡•Ä ‡§®‡§π‡•Ä‡§Ç', '‡§Æ‡•à‡§Ç ‡§ï‡§≤ ‡§∂‡•Å‡§∞‡•Ç ‡§ï‡§∞‡•Ç‡§Ç‡§ó‡§æ']
                    },
                    adherence: {
                        label: '‡§Ü‡§™ ‡§¶‡§µ‡§æ ‡§∞‡•ã‡§ú‡§æ‡§®‡§æ ‡§ï‡§ø‡§§‡§®‡•Ä ‡§¨‡§æ‡§∞ ‡§≤‡•á ‡§∞‡§π‡•á ‡§π‡•à‡§Ç?',
                        options: ['‡§¶‡§ø‡§® ‡§Æ‡•á‡§Ç ‡§è‡§ï ‡§¨‡§æ‡§∞', '‡§¶‡§ø‡§® ‡§Æ‡•á‡§Ç ‡§¶‡•ã ‡§¨‡§æ‡§∞', '‡§¶‡§ø‡§® ‡§Æ‡•á‡§Ç ‡§§‡•Ä‡§® ‡§¨‡§æ‡§∞', '‡§ú‡§∞‡•Ç‡§∞‡§§ ‡§ï‡•á ‡§Ö‡§®‡•Å‡§∏‡§æ‡§∞']
                    },
                    food_relation: {
                        label: '‡§≠‡•ã‡§ú‡§® ‡§ï‡•á ‡§∏‡§Ç‡§¨‡§Ç‡§ß ‡§Æ‡•á‡§Ç ‡§Ü‡§™ ‡§¶‡§µ‡§æ ‡§ï‡§¨ ‡§≤‡•á‡§§‡•á ‡§π‡•à‡§Ç?',
                        options: ['‡§≠‡•ã‡§ú‡§® ‡§∏‡•á ‡§™‡§π‡§≤‡•á', '‡§≠‡•ã‡§ú‡§® ‡§ï‡•á ‡§¨‡§æ‡§¶', '‡§≠‡•ã‡§ú‡§® ‡§ï‡•á ‡§∏‡§æ‡§•', '‡§ñ‡§æ‡§≤‡•Ä ‡§™‡•á‡§ü']
                    },
                    overall_feeling: {
                        label: '‡§¶‡§µ‡§æ ‡§∂‡•Å‡§∞‡•Ç ‡§ï‡§∞‡§®‡•á ‡§ï‡•á ‡§¨‡§æ‡§¶ ‡§∏‡•á ‡§Ü‡§™ ‡§ï‡•Å‡§≤ ‡§Æ‡§ø‡§≤‡§æ‡§ï‡§∞ ‡§ï‡•à‡§∏‡§æ ‡§Æ‡§π‡§∏‡•Ç‡§∏ ‡§ï‡§∞ ‡§∞‡§π‡•á ‡§π‡•à‡§Ç?',
                        options: ['‡§¨‡•á‡§π‡§§‡§∞ üòä', '‡§µ‡§π‡•Ä üòê', '‡§ñ‡§∞‡§æ‡§¨ üòî', '‡§¨‡§π‡•Å‡§§ ‡§ñ‡§∞‡§æ‡§¨ üò∞']
                    },
                    new_symptoms: {
                        label: '‡§ï‡•ç‡§Ø‡§æ ‡§Ü‡§™‡§®‡•á ‡§ï‡•ã‡§à ‡§®‡§è ‡§≤‡§ï‡•ç‡§∑‡§£ ‡§Ø‡§æ ‡§Ö‡§∏‡•Å‡§µ‡§ø‡§ß‡§æ ‡§¶‡•á‡§ñ‡•Ä ‡§π‡•à?',
                        options: ['‡§π‡§æ‡§Ç, ‡§Æ‡•Å‡§ù‡•á ‡§®‡§è ‡§≤‡§ï‡•ç‡§∑‡§£ ‡§π‡•à‡§Ç', '‡§ï‡•ã‡§à ‡§®‡§è ‡§≤‡§ï‡•ç‡§∑‡§£ ‡§®‡§π‡•Ä‡§Ç']
                    },
                    symptom_description: {
                        label: '‡§ï‡•É‡§™‡§Ø‡§æ ‡§â‡§® ‡§≤‡§ï‡•ç‡§∑‡§£‡•ã‡§Ç ‡§ï‡§æ ‡§µ‡§∞‡•ç‡§£‡§® ‡§ï‡§∞‡•á‡§Ç ‡§ú‡•ã ‡§Ü‡§™ ‡§Ö‡§®‡•Å‡§≠‡§µ ‡§ï‡§∞ ‡§∞‡§π‡•á ‡§π‡•à‡§Ç:'
                    },
                    onset: {
                        label: '‡§Ø‡•á ‡§≤‡§ï‡•ç‡§∑‡§£ ‡§ï‡§¨ ‡§∂‡•Å‡§∞‡•Ç ‡§π‡•Å‡§è?',
                        options: ['‡§™‡§π‡§≤‡•Ä ‡§ñ‡•Å‡§∞‡§æ‡§ï ‡§ï‡•á ‡§¨‡§æ‡§¶', '1 ‡§¶‡§ø‡§® ‡§ï‡•á ‡§≠‡•Ä‡§§‡§∞', '2-3 ‡§¶‡§ø‡§® ‡§¨‡§æ‡§¶', '3 ‡§¶‡§ø‡§® ‡§∏‡•á ‡§Ö‡§ß‡§ø‡§ï ‡§ï‡•á ‡§¨‡§æ‡§¶']
                    },
                    severity: {
                        label: '‡§≤‡§ï‡•ç‡§∑‡§£ ‡§ï‡§ø‡§§‡§®‡•á ‡§ó‡§Ç‡§≠‡•Ä‡§∞ ‡§π‡•à‡§Ç?',
                        options: ['‡§π‡§≤‡•ç‡§ï‡§æ (‡§ß‡•ç‡§Ø‡§æ‡§® ‡§¶‡•á‡§®‡•á ‡§Ø‡•ã‡§ó‡•ç‡§Ø ‡§≤‡•á‡§ï‡§ø‡§® ‡§™‡•ç‡§∞‡§¨‡§Ç‡§ß‡§®‡•Ä‡§Ø)', '‡§Æ‡§ß‡•ç‡§Ø‡§Æ (‡§Ö‡§∏‡§π‡§ú, ‡§¶‡•à‡§®‡§ø‡§ï ‡§ú‡•Ä‡§µ‡§® ‡§ï‡•ã ‡§™‡•ç‡§∞‡§≠‡§æ‡§µ‡§ø‡§§ ‡§ï‡§∞‡§§‡§æ ‡§π‡•à)', '‡§ó‡§Ç‡§≠‡•Ä‡§∞ (‡§ö‡§ø‡§ï‡§ø‡§§‡•ç‡§∏‡§æ ‡§ß‡•ç‡§Ø‡§æ‡§® ‡§ï‡•Ä ‡§ú‡§∞‡•Ç‡§∞‡§§ ‡§π‡•à) ‚ö†Ô∏è']
                    },
                    body_parts: {
                        label: '‡§Ü‡§™‡§ï‡•á ‡§∂‡§∞‡•Ä‡§∞ ‡§ï‡§æ ‡§ï‡•å‡§® ‡§∏‡§æ ‡§π‡§ø‡§∏‡•ç‡§∏‡§æ ‡§™‡•ç‡§∞‡§≠‡§æ‡§µ‡§ø‡§§ ‡§π‡•à? (‡§∏‡§≠‡•Ä ‡§≤‡§æ‡§ó‡•Ç ‡§ï‡§æ ‡§ö‡§Ø‡§® ‡§ï‡§∞‡•á‡§Ç)',
                        options: ['‡§§‡•ç‡§µ‡§ö‡§æ', '‡§™‡•á‡§ü/‡§™‡§æ‡§ö‡§®', '‡§∏‡§ø‡§∞', '‡§õ‡§æ‡§§‡•Ä', '‡§∏‡§æ‡§Ç‡§∏', '‡§Ö‡§®‡•ç‡§Ø']
                    },
                    safety_confirm: {
                        label: '‡§ï‡•É‡§™‡§Ø‡§æ ‡§™‡•Å‡§∑‡•ç‡§ü‡§ø ‡§ï‡§∞‡•á‡§Ç:',
                        options: ['‡§Æ‡•à‡§Ç ‡§∏‡§Æ‡§ù‡§§‡§æ ‡§π‡•Ç‡§Ç ‡§ï‡§ø ‡§Ö‡§ó‡§∞ ‡§≤‡§ï‡•ç‡§∑‡§£ ‡§¨‡§ø‡§ó‡§°‡§º‡§§‡•á ‡§π‡•à‡§Ç ‡§§‡•ã ‡§Æ‡•Å‡§ù‡•á ‡§Ö‡§™‡§®‡•á ‡§°‡•â‡§ï‡•ç‡§ü‡§∞ ‡§∏‡•á ‡§∏‡§Ç‡§™‡§∞‡•ç‡§ï ‡§ï‡§∞‡§®‡§æ ‡§ö‡§æ‡§π‡§ø‡§è', '‡§Æ‡•á‡§∞‡•á ‡§™‡§æ‡§∏ ‡§∏‡•ç‡§µ‡§æ‡§∏‡•ç‡§•‡•ç‡§Ø ‡§™‡•á‡§∂‡•á‡§µ‡§∞ ‡§ï‡•á ‡§≤‡§ø‡§è ‡§™‡•ç‡§∞‡§∂‡•ç‡§® ‡§π‡•à‡§Ç']
                    }
                }
            },
            ta: {
                title: 'üíä ‡ÆÆ‡Æ∞‡ØÅ‡Æ®‡Øç‡Æ§‡ØÅ ‡Æ™‡Æø‡Æ©‡Øç‡Æ§‡Øä‡Æü‡Æ∞‡Øç‡Æ§‡Æ≤‡Øç ‡Æ™‡Æü‡Æø‡Æµ‡ÆÆ‡Øç',
                subtitle: '‡Æâ‡Æô‡Øç‡Æï‡Æ≥‡Øç ‡ÆÜ‡Æ∞‡Øã‡Æï‡Øç‡Æï‡Æø‡ÆØ‡Æ§‡Øç‡Æ§‡Øà‡Æï‡Øç ‡Æï‡Æ£‡Øç‡Æï‡Ææ‡Æ£‡Æø‡Æï‡Øç‡Æï ‡Æá‡Æ®‡Øç‡Æ§‡Æ™‡Øç ‡Æ™‡Æü‡Æø‡Æµ‡Æ§‡Øç‡Æ§‡Øà ‡Æ®‡Æø‡Æ∞‡Æ™‡Øç‡Æ™‡Æµ‡ØÅ‡ÆÆ‡Øç',
                selectLanguage: 'üåê ‡Æâ‡Æô‡Øç‡Æï‡Æ≥‡Øç ‡Æµ‡Æø‡Æ∞‡ØÅ‡Æ™‡Øç‡Æ™‡ÆÆ‡Ææ‡Æ© ‡ÆÆ‡Øä‡Æ¥‡Æø‡ÆØ‡Øà‡Æ§‡Øç ‡Æ§‡Øá‡Æ∞‡Øç‡Æ®‡Øç‡Æ§‡ØÜ‡Æü‡ØÅ‡Æï‡Øç‡Æï‡Æµ‡ØÅ‡ÆÆ‡Øç:',
                submit: '‡Æ™‡Æü‡Æø‡Æµ‡Æ§‡Øç‡Æ§‡Øà ‡Æö‡ÆÆ‡Æ∞‡Øç‡Æ™‡Øç‡Æ™‡Æø‡Æï‡Øç‡Æï‡Æµ‡ØÅ‡ÆÆ‡Øç',
                thankYou: '‡Æ®‡Æ©‡Øç‡Æ±‡Æø!',
                successText: '‡Æâ‡Æô‡Øç‡Æï‡Æ≥‡Øç ‡Æ™‡Æ§‡Æø‡Æ≤‡Øç‡Æï‡Æ≥‡Øç ‡Æµ‡ØÜ‡Æ±‡Øç‡Æ±‡Æø‡Æï‡Æ∞‡ÆÆ‡Ææ‡Æï ‡Æö‡ÆÆ‡Æ∞‡Øç‡Æ™‡Øç‡Æ™‡Æø‡Æï‡Øç‡Æï‡Æ™‡Øç‡Æ™‡Æü‡Øç‡Æü‡Æ©. ‡Æá‡Æ™‡Øç‡Æ™‡Øã‡Æ§‡ØÅ ‡Æá‡Æ®‡Øç‡Æ§‡Æ™‡Øç ‡Æ™‡Æï‡Øç‡Æï‡Æ§‡Øç‡Æ§‡Øà ‡ÆÆ‡ØÇ‡Æü‡Æ≤‡Ææ‡ÆÆ‡Øç.',
                required: '(‡ÆÖ‡Æµ‡Æö‡Æø‡ÆØ‡ÆÆ‡Øç)',
                questions: {
                    medicine_started: {
                        label: '‡Æ®‡ØÄ‡Æô‡Øç‡Æï‡Æ≥‡Øç ‡Æ™‡Æ∞‡Æø‡Æ®‡Øç‡Æ§‡ØÅ‡Æ∞‡Øà‡Æï‡Øç‡Æï‡Æ™‡Øç‡Æ™‡Æü‡Øç‡Æü ‡ÆÆ‡Æ∞‡ØÅ‡Æ®‡Øç‡Æ§‡Øà ‡Æé‡Æü‡ØÅ‡Æï‡Øç‡Æï ‡ÆÜ‡Æ∞‡ÆÆ‡Øç‡Æ™‡Æø‡Æ§‡Øç‡Æ§‡ØÄ‡Æ∞‡Øç‡Æï‡Æ≥‡Ææ?',
                        options: ['‡ÆÜ‡ÆÆ‡Øç, ‡Æ®‡Ææ‡Æ©‡Øç ‡Æ§‡Øä‡Æü‡Æô‡Øç‡Æï‡Æø‡Æµ‡Æø‡Æü‡Øç‡Æü‡Øá‡Æ©‡Øç', '‡Æá‡Æ≤‡Øç‡Æ≤‡Øà, ‡Æá‡Æ©‡Øç‡Æ©‡ØÅ‡ÆÆ‡Øç ‡Æá‡Æ≤‡Øç‡Æ≤‡Øà', '‡Æ®‡Ææ‡Æ≥‡Øà ‡Æ§‡Øä‡Æü‡Æô‡Øç‡Æï‡ØÅ‡Æµ‡Øá‡Æ©‡Øç']
                    },
                    adherence: {
                        label: '‡Æ§‡Æø‡Æ©‡ÆÆ‡ØÅ‡ÆÆ‡Øç ‡Æé‡Æ§‡Øç‡Æ§‡Æ©‡Øà ‡ÆÆ‡ØÅ‡Æ±‡Øà ‡ÆÆ‡Æ∞‡ØÅ‡Æ®‡Øç‡Æ§‡ØÅ ‡Æé‡Æü‡ØÅ‡Æï‡Øç‡Æï‡Æø‡Æ±‡ØÄ‡Æ∞‡Øç‡Æï‡Æ≥‡Øç?',
                        options: ['‡Æí‡Æ∞‡ØÅ ‡Æ®‡Ææ‡Æ≥‡Øà‡Æï‡Øç‡Æï‡ØÅ ‡Æí‡Æ∞‡ØÅ ‡ÆÆ‡ØÅ‡Æ±‡Øà', '‡Æí‡Æ∞‡ØÅ ‡Æ®‡Ææ‡Æ≥‡Øà‡Æï‡Øç‡Æï‡ØÅ ‡Æá‡Æ∞‡Æ£‡Øç‡Æü‡ØÅ ‡ÆÆ‡ØÅ‡Æ±‡Øà', '‡Æí‡Æ∞‡ØÅ ‡Æ®‡Ææ‡Æ≥‡Øà‡Æï‡Øç‡Æï‡ØÅ ‡ÆÆ‡ØÇ‡Æ©‡Øç‡Æ±‡ØÅ ‡ÆÆ‡ØÅ‡Æ±‡Øà', '‡Æ§‡Øá‡Æµ‡Øà‡Æ™‡Øç‡Æ™‡Æü‡ØÅ‡ÆÆ‡Øç‡Æ™‡Øã‡Æ§‡ØÅ']
                    },
                    food_relation: {
                        label: '‡Æâ‡Æ£‡Æµ‡ØÅ‡Æü‡Æ©‡Øç ‡Æ§‡Øä‡Æü‡Æ∞‡Øç‡Æ™‡ØÅ‡Æü‡Øà‡ÆØ ‡ÆÆ‡Æ∞‡ØÅ‡Æ®‡Øç‡Æ§‡Øà ‡Æé‡Æ™‡Øç‡Æ™‡Øã‡Æ§‡ØÅ ‡Æé‡Æü‡ØÅ‡Æï‡Øç‡Æï‡Æø‡Æ±‡ØÄ‡Æ∞‡Øç‡Æï‡Æ≥‡Øç?',
                        options: ['‡Æâ‡Æ£‡Æµ‡ØÅ‡Æï‡Øç‡Æï‡ØÅ ‡ÆÆ‡ØÅ‡Æ©‡Øç', '‡Æâ‡Æ£‡Æµ‡ØÅ‡Æï‡Øç‡Æï‡ØÅ‡Æ™‡Øç ‡Æ™‡Æø‡Æ©‡Øç', '‡Æâ‡Æ£‡Æµ‡ØÅ‡Æü‡Æ©‡Øç', '‡Æµ‡ØÜ‡Æ±‡ØÅ‡ÆÆ‡Øç ‡Æµ‡ÆØ‡Æø‡Æ±‡Øç‡Æ±‡Æø‡Æ≤‡Øç']
                    },
                    overall_feeling: {
                        label: '‡ÆÆ‡Æ∞‡ØÅ‡Æ®‡Øç‡Æ§‡ØÅ ‡Æ§‡Øä‡Æü‡Æô‡Øç‡Æï‡Æø‡ÆØ‡Æ§‡Æø‡Æ≤‡Æø‡Æ∞‡ØÅ‡Æ®‡Øç‡Æ§‡ØÅ ‡Æí‡Æü‡Øç‡Æü‡ØÅ‡ÆÆ‡Øä‡Æ§‡Øç‡Æ§‡ÆÆ‡Ææ‡Æï ‡Æé‡Æ™‡Øç‡Æ™‡Æü‡Æø ‡Æâ‡Æ£‡Æ∞‡Øç‡Æï‡Æø‡Æ±‡ØÄ‡Æ∞‡Øç‡Æï‡Æ≥‡Øç?',
                        options: ['‡Æö‡Æø‡Æ±‡Æ™‡Øç‡Æ™‡Ææ‡Æï üòä', '‡ÆÖ‡Æ§‡Øá üòê', '‡ÆÆ‡Øã‡Æö‡ÆÆ‡Ææ‡Æï üòî', '‡ÆÆ‡Æø‡Æï‡Æµ‡ØÅ‡ÆÆ‡Øç ‡ÆÆ‡Øã‡Æö‡ÆÆ‡Ææ‡Æï üò∞']
                    },
                    new_symptoms: {
                        label: '‡Æ™‡ØÅ‡Æ§‡Æø‡ÆØ ‡ÆÖ‡Æ±‡Æø‡Æï‡ØÅ‡Æ±‡Æø‡Æï‡Æ≥‡Øç ‡ÆÖ‡Æ≤‡Øç‡Æ≤‡Æ§‡ØÅ ‡ÆÖ‡Æö‡Øå‡Æï‡Æ∞‡Æø‡ÆØ‡Æ§‡Øç‡Æ§‡Øà ‡Æï‡Æµ‡Æ©‡Æø‡Æ§‡Øç‡Æ§‡ØÄ‡Æ∞‡Øç‡Æï‡Æ≥‡Ææ?',
                        options: ['‡ÆÜ‡ÆÆ‡Øç, ‡Æ™‡ØÅ‡Æ§‡Æø‡ÆØ ‡ÆÖ‡Æ±‡Æø‡Æï‡ØÅ‡Æ±‡Æø‡Æï‡Æ≥‡Øç ‡Æâ‡Æ≥‡Øç‡Æ≥‡Æ©', '‡Æ™‡ØÅ‡Æ§‡Æø‡ÆØ ‡ÆÖ‡Æ±‡Æø‡Æï‡ØÅ‡Æ±‡Æø‡Æï‡Æ≥‡Øç ‡Æá‡Æ≤‡Øç‡Æ≤‡Øà']
                    },
                    symptom_description: {
                        label: '‡Æ®‡ØÄ‡Æô‡Øç‡Æï‡Æ≥‡Øç ‡ÆÖ‡Æ©‡ØÅ‡Æ™‡Æµ‡Æø‡Æï‡Øç‡Æï‡ØÅ‡ÆÆ‡Øç ‡ÆÖ‡Æ±‡Æø‡Æï‡ØÅ‡Æ±‡Æø‡Æï‡Æ≥‡Øà ‡Æµ‡Æø‡Æµ‡Æ∞‡Æø‡Æï‡Øç‡Æï‡Æµ‡ØÅ‡ÆÆ‡Øç:'
                    },
                    onset: {
                        label: '‡Æá‡Æ®‡Øç‡Æ§ ‡ÆÖ‡Æ±‡Æø‡Æï‡ØÅ‡Æ±‡Æø‡Æï‡Æ≥‡Øç ‡Æé‡Æ™‡Øç‡Æ™‡Øã‡Æ§‡ØÅ ‡Æ§‡Øä‡Æü‡Æô‡Øç‡Æï‡Æø‡Æ©?',
                        options: ['‡ÆÆ‡ØÅ‡Æ§‡Æ≤‡Øç ‡Æü‡Øã‡Æ∏‡ØÅ‡Æï‡Øç‡Æï‡ØÅ‡Æ™‡Øç ‡Æ™‡Æø‡Æ±‡Æï‡ØÅ', '1 ‡Æ®‡Ææ‡Æ≥‡ØÅ‡Æï‡Øç‡Æï‡ØÅ‡Æ≥‡Øç', '2-3 ‡Æ®‡Ææ‡Æü‡Øç‡Æï‡Æ≥‡ØÅ‡Æï‡Øç‡Æï‡ØÅ‡Æ™‡Øç ‡Æ™‡Æø‡Æ±‡Æï‡ØÅ', '3 ‡Æ®‡Ææ‡Æü‡Øç‡Æï‡Æ≥‡ØÅ‡Æï‡Øç‡Æï‡ØÅ ‡ÆÆ‡Øá‡Æ≤‡Øç ‡Æ™‡Æø‡Æ±‡Æï‡ØÅ']
                    },
                    severity: {
                        label: '‡ÆÖ‡Æ±‡Æø‡Æï‡ØÅ‡Æ±‡Æø‡Æï‡Æ≥‡Øç ‡Æé‡Æµ‡Øç‡Æµ‡Æ≥‡Æµ‡ØÅ ‡Æï‡Æü‡ØÅ‡ÆÆ‡Øà‡ÆØ‡Ææ‡Æ©‡Æµ‡Øà?',
                        options: ['‡Æ≤‡Øá‡Æö‡Ææ‡Æ©', '‡ÆÆ‡Æø‡Æ§‡ÆÆ‡Ææ‡Æ©', '‡Æï‡Æü‡ØÅ‡ÆÆ‡Øà‡ÆØ‡Ææ‡Æ© ‚ö†Ô∏è']
                    },
                    body_parts: {
                        label: '‡Æâ‡Æô‡Øç‡Æï‡Æ≥‡Øç ‡Æâ‡Æü‡Æ≤‡Æø‡Æ©‡Øç ‡Æé‡Æ®‡Øç‡Æ§ ‡Æ™‡Æï‡ØÅ‡Æ§‡Æø ‡Æ™‡Ææ‡Æ§‡Æø‡Æï‡Øç‡Æï‡Æ™‡Øç‡Æ™‡Æü‡Øç‡Æü‡ØÅ‡Æ≥‡Øç‡Æ≥‡Æ§‡ØÅ?',
                        options: ['‡Æ§‡Øã‡Æ≤‡Øç', '‡Æµ‡ÆØ‡Æø‡Æ±‡ØÅ', '‡Æ§‡Æ≤‡Øà', '‡ÆÆ‡Ææ‡Æ∞‡Øç‡Æ™‡ØÅ', '‡Æö‡ØÅ‡Æµ‡Ææ‡Æö‡ÆÆ‡Øç', '‡ÆÆ‡Æ±‡Øç‡Æ±‡Æµ‡Øà']
                    },
                    safety_confirm: {
                        label: '‡Æ§‡ÆØ‡Æµ‡ØÅ‡Æö‡ØÜ‡ÆØ‡Øç‡Æ§‡ØÅ ‡Æâ‡Æ±‡ØÅ‡Æ§‡Æø‡Æ™‡Øç‡Æ™‡Æü‡ØÅ‡Æ§‡Øç‡Æ§‡Æµ‡ØÅ‡ÆÆ‡Øç:',
                        options: ['‡ÆÖ‡Æ±‡Æø‡Æï‡ØÅ‡Æ±‡Æø‡Æï‡Æ≥‡Øç ‡ÆÆ‡Øã‡Æö‡ÆÆ‡Æü‡Øà‡Æ®‡Øç‡Æ§‡Ææ‡Æ≤‡Øç ‡Æé‡Æ©‡Øç ‡ÆÆ‡Æ∞‡ØÅ‡Æ§‡Øç‡Æ§‡ØÅ‡Æµ‡Æ∞‡Øà ‡Æ§‡Øä‡Æü‡Æ∞‡Øç‡Æ™‡ØÅ ‡Æï‡Øä‡Æ≥‡Øç‡Æµ‡Øá‡Æ©‡Øç', '‡Æé‡Æ©‡Æï‡Øç‡Æï‡ØÅ ‡Æï‡Øá‡Æ≥‡Øç‡Æµ‡Æø‡Æï‡Æ≥‡Øç ‡Æâ‡Æ≥‡Øç‡Æ≥‡Æ©']
                    }
                }
            }
        };

        // Question values (same for all languages)
        const questionValues = {
            medicine_started: ['yes', 'no', 'tomorrow'],
            adherence: ['once', 'twice', 'thrice', 'as_needed'],
            food_relation: ['before', 'after', 'with', 'empty'],
            overall_feeling: ['better', 'same', 'worse', 'much_worse'],
            new_symptoms: ['yes', 'no'],
            onset: ['first_dose', 'within_1_day', '2_3_days', 'more_than_3_days'],
            severity: ['mild', 'moderate', 'severe'],
            body_parts: ['skin', 'stomach', 'head', 'chest', 'breathing', 'other'],
            safety_confirm: ['confirmed', 'has_questions']
        };

        // Question configuration
        const questionConfig = [
            { id: 'medicine_started', type: 'radio', required: true },
            { id: 'adherence', type: 'radio', required: true },
            { id: 'food_relation', type: 'radio', required: true },
            { id: 'overall_feeling', type: 'radio', required: true },
            { id: 'new_symptoms', type: 'radio', required: true },
            { id: 'symptom_description', type: 'textarea', required: false, conditional: { field: 'new_symptoms', value: 'yes' } },
            { id: 'onset', type: 'radio', required: false, conditional: { field: 'new_symptoms', value: 'yes' } },
            { id: 'severity', type: 'radio', required: false, conditional: { field: 'new_symptoms', value: 'yes' } },
            { id: 'body_parts', type: 'checkbox', required: false, conditional: { field: 'new_symptoms', value: 'yes' } },
            { id: 'safety_confirm', type: 'radio', required: true }
        ];

        let currentLanguage = 'en';
        let formData = {};

        // Initialize form
        function initForm() {
            renderQuestions();
            setupLanguageSelector();
            setupFormSubmission();
            updateProgress();
        }

        // Render all questions
        function renderQuestions() {
            const container = document.getElementById('formContent');
            container.innerHTML = '';

            const t = translations[currentLanguage];

            questionConfig.forEach((config, index) => {
                const question = t.questions[config.id];
                if (!question) return;

                const div = document.createElement('div');
                div.className = 'question' + (config.conditional ? ' conditional' : '');
                div.id = `question-${config.id}`;

                let html = `
                    <div class="question-label">
                        <span class="question-number">${index + 1}</span>
                        ${question.label}
                        ${config.required ? '<span class="required-indicator">*</span>' : ''}
                    </div>
                `;

                if (config.type === 'radio') {
                    html += '<div class="options">';
                    question.options.forEach((option, i) => {
                        const value = questionValues[config.id][i];
                        html += `
                            <div class="option">
                                <input type="radio" name="${config.id}" id="${config.id}-${value}" value="${value}">
                                <label for="${config.id}-${value}">${option}</label>
                            </div>
                        `;
                    });
                    html += '</div>';
                } else if (config.type === 'checkbox') {
                    html += '<div class="options">';
                    question.options.forEach((option, i) => {
                        const value = questionValues[config.id][i];
                        html += `
                            <div class="option checkbox-option">
                                <input type="checkbox" name="${config.id}" id="${config.id}-${value}" value="${value}">
                                <label for="${config.id}-${value}">${option}</label>
                            </div>
                        `;
                    });
                    html += '</div>';
                } else if (config.type === 'textarea') {
                    html += `
                        <div class="textarea-wrapper">
                            <textarea name="${config.id}" id="${config.id}" placeholder="..."></textarea>
                        </div>
                    `;
                }

                div.innerHTML = html;
                container.appendChild(div);
            });

            // Setup event listeners for conditional questions
            setupConditionalLogic();
        }

        // Setup conditional question visibility
        function setupConditionalLogic() {
            // Listen for changes on new_symptoms
            document.querySelectorAll('input[name="new_symptoms"]').forEach(input => {
                input.addEventListener('change', (e) => {
                    const showConditional = e.target.value === 'yes';
                    document.querySelectorAll('.conditional').forEach(el => {
                        el.classList.toggle('show', showConditional);
                    });
                    updateProgress();
                });
            });

            // Update progress on any input change
            document.querySelectorAll('input, textarea').forEach(input => {
                input.addEventListener('change', updateProgress);
                input.addEventListener('input', updateProgress);
            });
        }

        // Setup language selector
        function setupLanguageSelector() {
            document.querySelectorAll('input[name="language"]').forEach(radio => {
                radio.addEventListener('change', (e) => {
                    currentLanguage = e.target.value;
                    switchLanguage();
                });
            });

            // Check URL for language parameter
            const urlParams = new URLSearchParams(window.location.search);
            const langParam = urlParams.get('lang');
            if (langParam && translations[langParam]) {
                currentLanguage = langParam;
                document.getElementById(`lang-${langParam}`).checked = true;
            }

            switchLanguage();
        }

        // Switch language
        function switchLanguage() {
            const t = translations[currentLanguage] || translations['en'];

            // Update static text
            document.querySelectorAll('[data-i18n]').forEach(el => {
                const key = el.getAttribute('data-i18n');
                if (t[key]) {
                    el.textContent = t[key];
                }
            });

            // Re-render questions to update labels
            renderQuestions();
        }

        // Update progress bar
        function updateProgress() {
            const requiredQuestions = questionConfig.filter(q => q.required).length;
            let answered = 0;

            questionConfig.forEach(config => {
                if (!config.required) return;

                if (config.type === 'radio') {
                    if (document.querySelector(`input[name="${config.id}"]:checked`)) {
                        answered++;
                    }
                }
            });

            const progress = (answered / requiredQuestions) * 100;
            document.getElementById('progressBar').style.width = `${progress}%`;
        }

        // Setup form submission
        function setupFormSubmission() {
            document.getElementById('followupForm').addEventListener('submit', async (e) => {
                e.preventDefault();

                const submitBtn = document.querySelector('.submit-btn');
                submitBtn.disabled = true;
                submitBtn.textContent = 'Submitting...';

                // Collect form data
                const formData = {
                    language: currentLanguage
                };

                questionConfig.forEach(config => {
                    if (config.type === 'radio') {
                        const selected = document.querySelector(`input[name="${config.id}"]:checked`);
                        if (selected) {
                            formData[config.id] = selected.value;
                        }
                    } else if (config.type === 'checkbox') {
                        const selected = document.querySelectorAll(`input[name="${config.id}"]:checked`);
                        formData[config.id] = Array.from(selected).map(el => el.value);
                    } else if (config.type === 'textarea') {
                        const textarea = document.getElementById(config.id);
                        if (textarea && textarea.value) {
                            formData[config.id] = textarea.value;
                        }
                    }
                });

                // Get form token from URL
                const pathParts = window.location.pathname.split('/');
                const token = pathParts[pathParts.length - 1];

                try {
                    const response = await fetch('/api/form/submit', {
                        method: 'POST',
                        headers: {
                            'Content-Type': 'application/json'
                        },
                        body: JSON.stringify({
                            token: token,
                            responses: formData
                        })
                    });

                    const result = await response.json();

                    if (result.success) {
                        // Show success message
                        document.getElementById('followupForm').style.display = 'none';
                        document.getElementById('submitSection').style.display = 'none';
                        document.getElementById('successMessage').classList.add('show');
                    } else {
                        alert('Error submitting form: ' + (result.error || 'Unknown error'));
                        submitBtn.disabled = false;
                        submitBtn.textContent = translations[currentLanguage].submit;
                    }
                } catch (error) {
                    console.error('Submission error:', error);
                    alert('Error submitting form. Please try again.');
                    submitBtn.disabled = false;
                    submitBtn.textContent = translations[currentLanguage].submit;
                }
            });
        }

        // Initialize on page load
        document.addEventListener('DOMContentLoaded', initForm);
    </script>
</body>
</html>
